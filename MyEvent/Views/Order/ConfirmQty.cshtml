@model IEnumerable<dynamic>
@{
    ViewData["Title"] = "ConfirmQty";
    var eventID = Context.Session.GetString("EventID");
}


<h1>確認票種數量</h1>

<table class="table">
    <thead>
        <tr>
            <th>票種名稱</th>
			<th>價格</th>
            <th>數量</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @{
        decimal totalAmount = 0;
        foreach (var item in Model)
        {
            if (item.Qty > 0)
            {
            <tr>
                <td>@item.TicketTypeName</td>
                <td>@Convert.ToInt32(Convert.ToDecimal(item.price) * Convert.ToDecimal(item.discount))</td>
                <td>@item.Qty</td>
                <td><i class="bi bi-trash3-fill"></i></td>
            </tr>
			    totalAmount += item.price * item.discount * item.Qty;
            }   
        }
        }
    </tbody>
</table>
<div>
    <h4>總金額: <b>$@Convert.ToInt32(totalAmount)</b></h4>
</div>

<form asp-action="PlaceOrder" asp-controller="Order" method="post">
     @foreach (var item in Model) 
     { 
         <input type="hidden" name="SeatID" value="@item.SeatID" /> 
         <input type="hidden" name="TicketTypeID" value="@item.TicketTypeID" />
        <input type="hidden" name="Price" value="@Convert.ToInt32(Convert.ToDecimal(item.price) * Convert.ToDecimal(item.discount))" />

     } 
     <button type="submit" class="btn btn-primary text-end">確認訂單</button> 
</form>

<a asp-action="Details" asp-controller="Browse" asp-route-id="@eventID" class="btn btn-secondary">返回</a>

